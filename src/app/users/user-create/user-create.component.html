<div>
    <h1 mat-dialog-title>{{ editMode ? 'Update User' : 'Add User'}}</h1>
    <button mat-button color="alert" *ngIf="editMode" (click)="onDelete()" style="margin-bottom: 2rem;">Delete User</button>

</div>

<mat-dialog-content>
    <form [formGroup]="form">
      <mat-form-field class="full-width">
        <input
          matInput
          placeholder="First name"
          formControlName="firstname">
      </mat-form-field>

      <mat-form-field class="full-width">
        <input matInput placeholder="Last name" formControlName="lastname">
      </mat-form-field>

      <mat-form-field class="full-width">
        <input matInput placeholder="Username" formControlName="username">
      </mat-form-field>

      <mat-form-field class="full-width" *ngIf="!editMode">
        <input matInput placeholder="Password" formControlName="password">
      </mat-form-field>

      <mat-form-field class="full-width">
        <input matInput placeholder="Table number" type="number" formControlName="table_no">
      </mat-form-field>

      <mat-form-field class="full-width">
        <input matInput placeholder="Seat number" type="number" formControlName="seat_no">
      </mat-form-field>

      <div formArrayName="companions">
        <div *ngFor="let companionCtrl of form.get('companions').controls; let i = index"
          [formGroupName]="i">
          <mat-card>
              <button mat-icon-button (click)="deleteCompanion()" class="remove_circle">
                <mat-icon>remove_circle</mat-icon>
              </button>
              <mat-card-content>
                <mat-form-field class="full-width">
                  <input
                    matInput
                    placeholder="First name"
                    formControlName="firstname">
                </mat-form-field>

                <mat-form-field class="full-width">
                  <input matInput placeholder="Last name" formControlName="lastname">
                </mat-form-field>

                <mat-form-field class="full-width">
                  <input matInput placeholder="Table number" type="number" formControlName="table_no">
                </mat-form-field>

                <mat-form-field class="full-width">
                  <input matInput placeholder="Seat number" type="number" formControlName="seat_no">
                </mat-form-field>
            </mat-card-content>
          </mat-card>
        </div>
      </div>

    </form>
    <button mat-icon-button (click)="onAddCompanion()" style="margin-bottom: 2rem;">
      <mat-icon>add</mat-icon>
      Companions
    </button>
</mat-dialog-content>


<div mat-dialog-actions style="background-color: #eff0f0;">
  <button mat-button (click)="onNoClick()">Cancel</button>
  <button mat-stroked-button color="primary" (click)="onSave()" [disabled]="!form.valid">SAVE</button>
</div>
